{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import React from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Card from'./Card';import{PIG,SHEEP,BLOOD,DOUBLER}from'./specialCards';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var OneDeclaration=function OneDeclaration(_ref){var specialCard=_ref.specialCard,specialCardName=_ref.specialCardName,declarations=_ref.declarations,setDeclarations=_ref.setDeclarations;return _jsxs(View,{children:[_jsx(Card,{card:specialCard}),_jsx(View,{style:{marginTop:2,justifyContent:\"space-between\"},children:[\"open\",\"close\",\"no\"].map(function(option){return _jsx(TouchableOpacity,{onPress:function onPress(){return setDeclarations(function(prevDecs){return _objectSpread(_objectSpread({},prevDecs),{},_defineProperty({},specialCardName,option));});},style:{flexDirection:\"row\",alignItems:\"center\",padding:5,backgroundColor:declarations[specialCardName]===option?\"#007AFF\":\"#BBB\",borderRadius:3,marginVertical:3},children:_jsx(Text,{style:{color:declarations[specialCardName]===option?\"white\":\"black\"},children:option+\" declare\"})},option);})})]});};var Declaration=function Declaration(_ref2){var hand=_ref2.hand,declarations=_ref2.declarations,setDeclarations=_ref2.setDeclarations;var has_pig=false;var has_sheep=false;var has_blood=false;var has_doubler=false;for(var card of hand){if(card.suit===PIG.suit&&card.rank===PIG.rank){has_pig=true;}if(card.suit===SHEEP.suit&&card.rank===SHEEP.rank){has_sheep=true;}if(card.suit===BLOOD.suit&&card.rank===BLOOD.rank){has_blood=true;}if(card.suit===DOUBLER.suit&&card.rank===DOUBLER.rank){has_doubler=true;}}if(!has_pig&&!has_sheep&&!has_blood&&!has_doubler){return _jsx(View,{children:_jsx(Text,{children:\"No Special Card to Declare!\"})});}return _jsx(View,{style:{flexDirection:'row',alignItems:'center'},children:[{condition:has_pig,card:PIG,name:\"pig\"},{condition:has_sheep,card:SHEEP,name:\"sheep\"},{condition:has_blood,card:BLOOD,name:\"blood\"},{condition:has_doubler,card:DOUBLER,name:\"doubler\"}].map(function(_ref3){var condition=_ref3.condition,card=_ref3.card,name=_ref3.name;return condition&&_jsx(OneDeclaration,{specialCard:card,specialCardName:name,declarations:declarations,setDeclarations:setDeclarations},name);})});};export default Declaration;","map":{"version":3,"names":["React","View","Text","TouchableOpacity","Card","PIG","SHEEP","BLOOD","DOUBLER","jsx","_jsx","jsxs","_jsxs","OneDeclaration","_ref","specialCard","specialCardName","declarations","setDeclarations","children","card","style","marginTop","justifyContent","map","option","onPress","prevDecs","_objectSpread","_defineProperty","flexDirection","alignItems","padding","backgroundColor","borderRadius","marginVertical","color","Declaration","_ref2","hand","has_pig","has_sheep","has_blood","has_doubler","suit","rank","condition","name","_ref3"],"sources":["/Users/yuezhang/Documents/projects/gongzhu/GongzhuGUI/src/components/Declaration.tsx"],"sourcesContent":["// Declaration UI used in GameTable\nimport React from 'react';\nimport { View, Image, Text, StyleSheet, Button, TouchableOpacity } from 'react-native';\nimport { CardInterface, DeclarationsInterface } from '../types';\nimport Card from './Card';\nimport { PIG, SHEEP, BLOOD, DOUBLER} from './specialCards';\n\nconst OneDeclaration : React.FC<{\n    specialCard: CardInterface,\n    specialCardName: string,\n    declarations: DeclarationsInterface,\n    setDeclarations: Function,\n}>= ({specialCard, specialCardName, declarations, setDeclarations}) => {\n    // console.log(declarations)\n    return (<View>\n        <Card card={specialCard}/>\n        <View style={{ marginTop: 2, justifyContent: \"space-between\" }}>\n          {[\"open\", \"close\", \"no\"].map((option) => (\n            <TouchableOpacity\n              key={option}\n              onPress={() => setDeclarations(prevDecs => ({\n                ...prevDecs,  \n                [specialCardName]: option // Update only the specific key\n            }))}\n              style={{\n                flexDirection: \"row\",\n                alignItems: \"center\",\n                padding: 5,\n                backgroundColor: declarations[specialCardName] === option ? \"#007AFF\" : \"#BBB\",\n                borderRadius: 3,\n                marginVertical: 3,\n              }}\n            >\n              <Text style={{ color: declarations[specialCardName] === option ? \"white\" : \"black\" }}>\n                {option + \" declare\"}\n              </Text>\n            </TouchableOpacity>\n          ))}\n          </View>\n    </View>);\n};\n\nconst Declaration : React.FC<{\n    hand: CardInterface[],\n    declarations: DeclarationsInterface,\n    setDeclarations: Function,\n}>= ({hand, declarations, setDeclarations}) => {\n    // console.log(hand)\n    let has_pig = false;\n    let has_sheep = false;\n    let has_blood = false;\n    let has_doubler = false;\n    \n    for (const card of hand) {\n        if (card.suit === PIG.suit && card.rank === PIG.rank) {\n            has_pig = true;\n        }\n        if (card.suit === SHEEP.suit && card.rank === SHEEP.rank) {\n            has_sheep = true;\n        }\n        if (card.suit === BLOOD.suit && card.rank === BLOOD.rank) {  \n            has_blood = true;\n        }\n        if (card.suit === DOUBLER.suit && card.rank === DOUBLER.rank) {  \n            has_doubler = true;\n        }\n    }\n\n    if (!has_pig && !has_sheep && !has_blood && !has_doubler) {\n        return (\n            <View>\n                <Text>No Special Card to Declare!</Text>\n            </View>\n        )\n    }\n\n    return (<View style={{ flexDirection: 'row', alignItems: 'center' }}>\n        {[\n            { condition: has_pig, card: PIG, name: \"pig\" },\n            { condition: has_sheep, card: SHEEP, name: \"sheep\" },\n            { condition: has_blood, card: BLOOD, name: \"blood\" },\n            { condition: has_doubler, card: DOUBLER, name: \"doubler\" }\n        ].map(({ condition, card, name }) => \n            condition && (\n                <OneDeclaration \n                    key={name} \n                    specialCard={card} \n                    specialCardName={name} \n                    declarations={declarations} \n                    setDeclarations={setDeclarations} \n                />\n            )\n        )}\n    </View>\n    );\n};\n\nexport default Declaration;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}